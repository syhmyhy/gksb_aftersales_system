<!-- viewonly_job.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Borang Tugas</title>
    <link rel="stylesheet" href="../static/styles/job.css">
    <script src="../static/scripts/job_calculation.js"></script>
</head>
<body>
        <div class="sidebar">
            <a href="{{ url_for('home') }}">Halaman Utama</a>
            <a href="{{ url_for('show_aftersales_management') }}">Pengurusan Aftersales</a>
            <a href="{{ url_for('show_aftersales_form') }}">Aftersales</a>
            <a href="{{ url_for('show_job_management') }}">Pengurusan Tugas</a>
            <a href="{{ url_for('show_job_form') }}" class="active">Tugas</a>
            <a href="{{ url_for('show_staff_profile') }}">Profil</a>
            <a href="#" onclick="confirmLogout()">Log Keluar</a>
        </div>
        <div class="container mt-5">
            <h2>Borang Tugas</h2>
            <p>Halaman ini adalah untuk paparan sahaja. Sila dapatkan kebenaran untuk membuat sebarang pengubahsuaian.</p>
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <ul class="flash-messages">
                        {% for category, message in messages %}
                            <li class="{{ category }}">{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            {% endwith %}
            <hr>
            <form action="/submit_job_form" method="post" onsubmit="return validateJobNo() && confirmSubmit()">
                <!-- Job form fields here -->
                <label for="jobNo">Job No:</label><br>
                <input type="text" id="jobNo" name="jobNo" placeholder="Masukkan Job No..." disabled>                

                <label for="title">Tajuk:</label><br>
                <input type="text" id="title" name="title" placeholder="Masukkan Tajuk..." disabled><br>
                
                <label for="custName">Nama Pelanggan:</label><br>
                <input type="text" id="custName" name="custName" list="customerList" placeholder="Pilih atau Masukkan Nama Pelanggan..." disabled>
                <datalist id="customerList">
                    <!-- Dynamic options for customer names -->
                    <option value="JABATAN PERDANA MENTERI (JPM)" data-calc="">JABATAN PERDANA MENTERI (JPM)</option>
                    <option value="KEMENTERIAN KEWANGAN (MOF)" data-calc="">KEMENTERIAN KEWANGAN (MOF)</option>
                    <option value="KEMENTERIAN KEMAJUAN DESA DAN WILAYAH (KKDW)" data-calc="">KEMENTERIAN KEMAJUAN DESA DAN WILAYAH (KKDW)</option>
                    <option value="KEMENTERIAN PERUSAHAAN PERLADANGAN DAN KOMODITI (MPIC)" data-calc="">KEMENTERIAN PERUSAHAAN PERLADANGAN DAN KOMODITI (MPIC)</option>
                    <option value="KEMENTERIAN PENGANGKUTAN (MOT)" data-calc="">KEMENTERIAN PENGANGKUTAN (MOT)</option>
                    <option value="KEMENTERIAN PERTANIAN DAN INDUSTRI MAKANAN (MAFS)" data-calc="">KEMENTERIAN PERTANIAN DAN INDUSTRI MAKANAN (MAFS)</option>
                    <option value="KEMENTERIAN EKONOMI" data-calc="">KEMENTERIAN EKONOMI</option>
                    <option value="KEMENTERIAN PERUMAHAN DAN KERAJAAN TEMPATAN (KPKT)" data-calc="">KEMENTERIAN PERUMAHAN DAN KERAJAAN TEMPATAN (KPKT)</option>
                    <option value="KEMENTERIAN PERTAHANAN (MINDEF)" data-calc="">KEMENTERIAN PERTAHANAN (MINDEF)</option>
                    <option value="KEMENTERIAN KERJA RAYA (KKR)" data-calc="">KEMENTERIAN KERJA RAYA (KKR)</option>
                    <option value="KEMENTERIAN DALAM NEGERI (KDN)" data-calc="">KEMENTERIAN DALAM NEGERI (KDN)</option>
                    <option value="KEMENTERIAN PERDAGANGAN ANTARABANGSA DAN INDUSTRI (MITI)" data-calc="">KEMENTERIAN PERDAGANGAN ANTARABANGSA DAN INDUSTRI (MITI)</option>
                    <option value="KEMENTERIAN PENDIDIKAN TINGGI (KPT)" data-calc="">KEMENTERIAN PENDIDIKAN TINGGI (KPT)</option>
                    <option value="KEMENTERIAN SAINS, TEKNOLOGI DAN INOVASI (MOSTI)" data-calc="">KEMENTERIAN SAINS, TEKNOLOGI DAN INOVASI (MOSTI)</option>
                    <option value="KEMENTERIAN PEMBANGUNAN WANITA, KELUARGA DAN MASYARAKAT (KPWKM)" data-calc="">KEMENTERIAN PEMBANGUNAN WANITA, KELUARGA DAN MASYARAKAT (KPWKM)</option>
                    <option value="KEMENTERIAN PERDAGANGAN DALAM NEGERI DAN KOS SARA HIDUP (KPDN)" data-calc="">KEMENTERIAN PERDAGANGAN DALAM NEGERI DAN KOS SARA HIDUP (KPDN)</option>
                    <option value="KEMENTERIAN SUMBER ASLI, ALAM SEKITAR DAN PERUBAHAN IKLIM (NRECC)" data-calc="">KEMENTERIAN SUMBER ASLI, ALAM SEKITAR DAN PERUBAHAN IKLIM (NRECC)</option>
                    <option value="KEMENTERIAN PEMBANGUNAN USAHAWAN DAN KOPERASI (KUSKOP)" data-calc="">KEMENTERIAN PEMBANGUNAN USAHAWAN DAN KOPERASI (KUSKOP)</option>
                    <option value="KEMENTERIAN LUAR NEGERI (KLN)" data-calc="">KEMENTERIAN LUAR NEGERI (KLN)</option>
                    <option value="KEMENTERIAN PELANCONGAN, SENI DAN BUDAYA (MOTAC)" data-calc="">KEMENTERIAN PELANCONGAN, SENI DAN BUDAYA (MOTAC)</option>
                    <option value="KEMENTERIAN PENDIDIKAN MALAYSIA (KPM)" data-calc="">KEMENTERIAN PENDIDIKAN MALAYSIA (KPM)</option>
                    <option value="KEMENTERIAN PERPADUAN NEGARA (KPN)" data-calc="">KEMENTERIAN PERPADUAN NEGARA (KPN)</option>
                    <option value="KEMENTERIAN BELIA DAN SUKAN (KBS)" data-calc="">KEMENTERIAN BELIA DAN SUKAN (KBS)</option>
                    <option value="KEMENTERIAN SUMBER MANUSIA (KSM)" data-calc="">KEMENTERIAN SUMBER MANUSIA (KSM)</option>
                    <option value="KEMENTERIAN KESIHATAN MALAYSIA (KKM)" data-calc="">KEMENTERIAN KESIHATAN MALAYSIA (KKM)</option>
                    <!-- Add dynamic options here -->
                    {% for customer in customers %}
                        <option value="{{ customer }}">{{ customer }}</option>
                    {% endfor %}
                </datalist><br>
                
                <label for="vehicleType">Jenis Kenderaan:</label><br>
                <input type="text" id="vehicleType" name="vehicleType" list="vehicleList" placeholder="Pilih atau Masukkan Jenis Kenderaan..." disabled>
                <datalist id="vehicleList">
                    <!-- Dynamic options for vehicle types -->
                    <option value="BAS">BAS</option>
                    <option value="KERETA">KERETA</option>
                    <option value="GKMK1">GKMK1</option>
                    <option value="GKMK2">GKMK2</option>
                    <option value="KENDERAAN KHAS">KENDERAAN KHAS</option>
                    <option value="LORI">LORI</option>
                    <option value="MOTOSIKAL">MOTOSIKAL</option>
                    <option value="PICKUP 4x4">PICKUP 4x4</option>
                    <option value="VAN">VAN</option>
                    {% for vehicle_type in vehicle_types %}
                        <option value="{{ vehicle_type }}">{{ vehicle_type }}</option>
                    {% endfor %}
                </datalist><br>
                
                <label for="quantity">Kuantiti:</label><br>
                <input type="number" id="quantity" name="quantity" min="1" max="10000" placeholder="0" disabled><br>
                
                <label for="ateReceived">Tarikh SST:</label><br>
                <input type="date" id="dateReceived" name="dateReceived" disabled><br>

                <label for="costUnit">Unit Kos (RM):</label><br>
                <input type="number" id="costUnit" name="costUnit" step="0.01" min="0" placeholder="0.00" disabled><br>
                
                <label for="totalCost">Jumlah Kos (RM):</label><br>
                <input type="number" id="totalCost" name="totalCost" step="0.01" min="0" placeholder="0.00" disabled><br>
                
                <label for="profitUnit">Unit Keuntungan (RM):</label><br>
                <input type="number" id="profitUnit" name="profitUnit" step="0.01" min="0" placeholder="0.00" disabled><br>
                
                <label for="totalProfit">Jumlah Keuntungan (RM):</label><br>
                <input type="number" id="totalProfit" name="totalProfit" step="0.01" min="0" placeholder="0.00" disabled><br>
                
                <label for="jobDateDelivered">Tarikh Penghantaran:</label><br>
                <input type="date" id="jobDateDelivered" name="jobDateDelivered" disabled><br>
                
                <!-- Include staffID as a hidden input field -->
                <label for="staffID">Staff ID: </label><br>
                <input type="text" id="staffID" name="staffID" value="{{ session['staff_id'] }}" disabled><br>
                <hr>
            </form>
        </div>
    <script>
        // JavaScript functions here
        function confirmSubmit() {
            var confirmation = confirm("Adakah anda pasti ingin hantar tugas ini?");
            return confirmation;
        }

        function confirmLogout() {
            if (confirm("Adakah anda pasti ingin log keluar?")) {
                window.location.href = "{{ url_for('logout') }}";
            }
        }  

        function validateJobNo() {
            var jobNoInput = document.getElementById("jobNo").value;
            if (jobNoInput.trim() === '' || isNaN(jobNoInput)) {
                alert("Sila masukkan nombor Job yang sah.");
                return false;
            }
            return true;
        }
    </script>
</body>
</html>